
#!/bin/bash
clear
sleep 3

rm ~/x

echo "Installing Termux-am..."
pkg install termux-am -y &>/dev/null

termux-setup-storage & sleep 4 &>/dev/null

while true; do
    if [ -d ~/storage/shared ]; then
        break
    else
        echo "Storage permission denied"
    fi
    sleep 3
done
sleep 3

echo "Installing packages for Termux..."
apt-get clean
apt-get update >/dev/null 2>&1
apt-get -y --with-new-pkgs -o Dpkg::Options::="--force-confdef" upgrade >/dev/null 2>&1
pkg install x11-repo -y &>/dev/null
pkg install pulseaudio -y &>/dev/null
pkg install xwayland -y &>/dev/null
pkg install wget -y &>/dev/null
pkg install tsu -y &>/dev/null
pkg install root-repo -y &>/dev/null
pkg install patchelf -y &>/dev/null
pkg install p7zip -y &>/dev/null
pkg install xorg-xrandr -y &>/dev/null
pkg install ncurses-utils -y &>/dev/null
pkg install hashdeep -y &>/dev/null
pkg install termux-x11-nightly -y &>/dev/null

if [ -e $PREFIX/glibc ]; then
    echo -n "Removing previous glibc. Continue? (Y/n) "
    read i
    if [ "$i" = "Y" ] || [ "$i" = "y" ]; then
        rm -rf $PREFIX/glibc
    else
        return 1
    fi
fi

#!/bin/bash

cd $HOME

wget -q --show-progress -O box64-binaries.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/box64-binaries.tar.xz
tar -xf box64-binaries.tar.xz -C $HOME

wget -q --show-progress -O dxvk.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/dxvk.tar.xz
tar -xf dxvk.tar.xz -C $HOME

wget -q --show-progress -O en-ru-locate.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/en-ru-locate.tar.xz
tar -xf en-ru-locate.tar.xz -C $HOME

wget -q --show-progress -O glibc-prefix.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/glibc-prefix.tar.xz
tar -xf glibc-prefix.tar.xz -C $HOME

wget -q --show-progress -O libudev.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/libudev.tar.xz
tar -xf libudev.tar.xz -C $HOME

wget -q --show-progress -O mangohud.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/mangohud.tar.xz
tar -xf mangohud.tar.xz -C $HOME

wget -q --show-progress -O mangohud2.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/mangohud2.tar.xz
tar -xf mangohud2.tar.xz -C $HOME

wget -q --show-progress -O package-manager https://github.com/Shephard225/mobox-remake/releases/download/emu-files/package%20manager

wget -q --show-progress -O prefix-apps.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/prefix-apps.tar.xz
tar -xf prefix-apps.tar.xz -C $HOME

wget -q --show-progress -O scripts.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/scripts.tar.xz
tar -xf scripts.tar.xz -C $HOME

wget -q --show-progress -O turnip.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/turnip.tar.xz
tar -xf turnip.tar.xz -C $HOME

wget -q --show-progress -O wine-8.18-staging-wow64.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/wine-8.18-staging-wow64.tar.xz
tar -xf wine-8.18-staging-wow64.tar.xz -C $HOME

wget -q --show-progress -O wine-9.0-staging-wow64.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/wine-9.0-staging-wow64.tar.xz
tar -xf wine-9.0-staging-wow64.tar.xz -C $HOME

wget -q --show-progress -O wine-9.1-vanilla-wow64.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/wine-9.1-vanilla-wow64.tar.xz
tar -xf wine-9.1-vanilla-wow64.tar.xz -C $HOME

wget -q --show-progress -O wine-9.3-vanilla-wow64.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/wine-9.3-vanilla-wow64.tar.xz
tar -xf wine-9.3-vanilla-wow64.tar.xz -C $HOME

wget -q --show-progress -O wine-ge-custom-8.25.tar.xz https://github.com/Shephard225/mobox-remake/releases/download/emu-files/wine-ge-custom-8.25.tar.xz
tar -xf wine-ge-custom-8.25.tar.xz -C $HOME

echo "Mobox-remake installed."
sleep 3

echo "Updating package-manager"
mkdir -p $PREFIX/glibc/opt/package-manager/installed

. $PREFIX/glibc/opt/package-manager/package-manager
sync-all

if [ "$INSTALL_WOW64" = "1" ]; then
    sync-package wine-9.3-vanilla-wow64
else
    sync-package wine-ge-custom-8-25
fi

ln -sf $PREFIX/glibc/opt/scripts/mobox-remake $PREFIX/bin/mobox-remake
echo "To start - type \"mobox-remake\""
